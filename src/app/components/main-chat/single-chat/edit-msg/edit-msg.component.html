<form
  (ngSubmit)="onSubmit(chat.id, taskForm)"
  #taskForm="ngForm"
  onsubmit="return false"
  (mouseleave)="this.isEmojiPickerVisible = false"
>
  <textarea
    type="text"
    id="message"
    name="message"
    minlength="6"
    #message="ngModel"
    [(ngModel)]="chat.message"
    >{{ originalMessage }}</textarea
  >

  @if(isEmojiPickerVisible) {
  <app-emoji-picker
    [output]="'native'"
    (emojiOutputEmitter)="emojiOutputEmitter($event)"
  ></app-emoji-picker>
  }
  <div class="footer">
    <app-small-btn
      [imgSrc]="'add-reaction.svg'"
      [imgSize]="'24px'"
      [btnSize]="'36px'"
      [btnBgHoverColor]="'#edeefe'"
      (click)="toggleEmojiPicker()"
    ></app-small-btn>
    <div class="btns">
      <button type="reset" class="btn" (click)="closeEditMsg()">Cancel</button>
      <button
        type="submit"
        class="btn"
        [disabled]="message.invalid || chat.message == originalMessage"
      >
        Save
      </button>
    </div>
  </div>

  <!-- FILES -->

  <ng-container *ngIf="downloadFilesService.downloadedFiles | async as files">
    <div *ngFor="let folder of files">
      <div class="files" *ngIf="chat.id == folder.id">
        <div *ngFor="let file of folder.files">
          <div class="fileBox">
            <img
              src=" {{ getFileType(file) }}"
              class="fileIcons"
              (click)="showCurrentFile(file)"
            />
            <img
              src="assets/img/closeIcon.svg"
              class="closeIcon"
              (click)="deleteFile(file)"
            />
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</form>
