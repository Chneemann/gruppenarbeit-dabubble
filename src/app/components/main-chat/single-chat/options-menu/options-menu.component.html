<section
  (mouseleave)="this.isNavOpen = false; this.isEmojiPickerVisible = false"
  [ngClass]="{ mirror: user.id === userService.userId }"
>
  @if (!openOnSecondaryChat) {
  <div class="content">
    <app-small-btn
      [imgSrc]="'okay.svg'"
      [imgSize]="'24px'"
      [btnSize]="'36px'"
      [imgFilter]="'none'"
      [btnBgHoverColor]="'#edeefe'"
      [ngClass]="{ mirror: user.id === userService.userId }"
      (click)="addReactionIcon('okay', currentChat)"
    >
    </app-small-btn>
    <app-small-btn
      [imgSrc]="'clap-hands.svg'"
      [imgSize]="'24px'"
      [btnSize]="'36px'"
      [imgFilter]="'none'"
      [btnBgHoverColor]="'#edeefe'"
      [ngClass]="{ mirror: user.id === userService.userId }"
      (click)="addReactionIcon('clap-hands', currentChat)"
    >
    </app-small-btn>
    <app-small-btn
      [imgSrc]="'add-reaction.svg'"
      [imgSize]="'24px'"
      [btnSize]="'36px'"
      [btnBgHoverColor]="'#edeefe'"
      [ngClass]="{ mirror: user.id === userService.userId }"
      (click)="toggleEmojiPicker()"
    >
    </app-small-btn>
    @if (!isPrivatChannel) {
    <app-small-btn
      [imgSrc]="'answer.svg'"
      [imgSize]="'24px'"
      [btnSize]="'36px'"
      [btnBgHoverColor]="'#edeefe'"
      [ngClass]="{ mirror: user.id === userService.userId }"
      (click)="toggleSecondaryChat(currentChat)"
    >
    </app-small-btn>
    } @if (user.id === userService.userId) {
    <app-small-btn
      [imgSrc]="'more-vertical.svg'"
      [imgSize]="'24px'"
      [btnSize]="'36px'"
      [btnBgHoverColor]="'#edeefe'"
      [ngClass]="{ mirror: user.id === userService.userId }"
      (click)="toggleNav()"
    >
    </app-small-btn>
    }
  </div>
  <div
    class="nav"
    [ngClass]="{
      'd-none': !isNavOpen,
      'animation-coming-in': isNavOpen,
      'animation-coming-out': !isNavOpen
    }"
  >
    <div class="navbar">
      <p
        [ngClass]="{ mirror: user.id === userService.userId }"
        (click)="editMsg()"
      >
        Edit message
      </p>
      <p
        [ngClass]="{ mirror: user.id === userService.userId }"
        (click)="deleteMsg('chats')"
      >
        Delete message
      </p>
    </div>
  </div>
  } @else {
  <div class="content">
    <app-small-btn
      [imgSrc]="'add-reaction.svg'"
      [imgSize]="'24px'"
      [btnSize]="'36px'"
      [btnBgHoverColor]="'#edeefe'"
      [ngClass]="{ mirror: user.id === userService.userId }"
      (click)="toggleEmojiPicker()"
    ></app-small-btn>
    @if (user.id === userService.userId) {
    <app-small-btn
      [imgSrc]="'more-vertical.svg'"
      [imgSize]="'24px'"
      [btnSize]="'36px'"
      [btnBgHoverColor]="'#edeefe'"
      [ngClass]="{ mirror: user.id === userService.userId }"
      (click)="toggleNav()"
    >
    </app-small-btn>
    }
  </div>
  <div
    class="nav"
    [ngClass]="{
      'd-none': !isNavOpen,
      'animation-coming-in': isNavOpen,
      'animation-coming-out': !isNavOpen
    }"
  >
    <div class="navbar">
      <p
        [ngClass]="{ mirror: user.id === userService.userId }"
        (click)="editMsg()"
      >
        Edit message
      </p>
      <p
        [ngClass]="{ mirror: user.id === userService.userId }"
        (click)="deleteMsg('chat-answers')"
      >
        Delete message
      </p>
    </div>
  </div>
  } @if(isEmojiPickerVisible) {
  <app-emoji-picker
    [output]="'id'"
    [ngClass]="{
      mirror: user.id === userService.userId,
      secondaryChatPickerOffset: openOnSecondaryChat
    }"
    (emojiOutputEmitter)="emojiOutputEmitter($event, currentChat)"
    (emojiVisibleEmitter)="emojiVisibleEmitter($event)"
  ></app-emoji-picker>
  }
</section>
