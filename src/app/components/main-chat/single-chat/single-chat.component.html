<section (mouseenter)="toggleOptionMenu()" (mouseleave)="toggleOptionMenu()">
  @if (showOptionsMenu){
  <app-options-menu
    [ngStyle]="{ display: isOptionMenuVisible ? 'block' : 'none' }"
    [index]="index"
    [currentChat]="currentChat"
    (editMsgEmitter)="editMsgEmitter($event)"
  >
    ></app-options-menu
  >
  }
  <div class="userAvatar">
    <img src="assets/img/user-icons/{{ user.avatar }}.svg" alt="" />
  </div>
  @if (!isMsgEditFormOpen) {
  <div class="userContent" [ngClass]="{ mirror: index % 2 !== 0 }">
    <div class="name">
      {{ user.firstName }} {{ user.lastName }}
      <span>{{ convertTimestampHour(chat.publishedTimestamp) }}</span>
    </div>
    <div class="content">
      <div class="msg">
        {{ chat.message }}
        @if (chat.edited) {
        <span>(bearbeitet)</span>
        }
      </div>
      <app-attachments [chatId]="chat.id"></app-attachments>
    </div>
    <div class="answers">
      @if (chatService.getChatAnswers(chat.id).length > 0 && showAnswer) {
      <p (click)="openSecondaryChat(chat.id)">
        {{ displayCountChatAnswer() }} Answers
      </p>
      <span>Last answer: {{ displayLastChatAnswer() }}</span>

      } @else { @if (showAnswer) {
      <p (click)="openSecondaryChat(chat.id)">Answers...</p>
      } }
    </div>
  </div>
  } @else {
  <div class="editForm" [ngClass]="{ mirror: index % 2 !== 0 }">
    <app-edit-msg
      [chat]="chat"
      (closeEditMsgEmitter)="closeEditMsgEmitter($event)"
    ></app-edit-msg>
  </div>
  }
</section>
